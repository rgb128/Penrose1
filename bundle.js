(()=>{"use strict";var t,e,i,n,s={80:()=>{},834:(t,e,i)=>{i.d(e,{S:()=>u});var n=i(25),s=i(915),o=i(875);const h=Math.cos(Math.PI/10),a=Math.sin(Math.PI/10),l=Math.cos(Math.PI/5),r=Math.sin(Math.PI/5),c=.075,m=1,d=.2;function g(t,e,i,o,g){if("kite"===e.type){const l=e.rhombuses.find((t=>t.isThin)),r=x(l.points[0],l.points[2]),u=new n.E(e.x-r.x,e.y-r.y);!function(t,e,i,o,l,r){o-=Math.PI/2;const g=(t,e,i,o)=>{const h=(0,s.cG)(new n.E(e,i),o);return new n.E(h.x+t.x,h.y+t.y)},x=t=>{e.moveTo(t.x,t.y)},u=t=>{e.lineTo(t.x,t.y)},y=l(i),p=l(g(i,0,2*-a,o)),f=l(g(i,0,1,o)),b=l(g(i,-h,-a,o)),w=l(g(i,-h,1-a,o)),P=l(g(i,h,-a,o)),v=l(g(i,h,1-a,o));e.strokeStyle=r.border,e.lineWidth=m,e.fillStyle=r.thin,e.beginPath(),x(y),u(P),u(p),u(b),u(y),e.stroke(),e.fill(),e.strokeStyle=r.smallCircle,e.lineWidth=t*c,e.beginPath(),e.arc(p.x,p.y,t*d,o+Math.PI/10,o+Math.PI-Math.PI/10,!1),e.stroke(),e.strokeStyle=r.bigCircle,e.lineWidth=t*c,e.beginPath(),e.arc(y.x,y.y,t*d,o-Math.PI/10,o-Math.PI+Math.PI/10,!0),e.stroke(),e.beginPath(),e.strokeStyle=r.border,e.lineWidth=m,e.fillStyle=r.thick,x(y),u(b),u(w),u(f),u(y),e.stroke(),e.fill(),e.strokeStyle=r.bigCircle,e.lineWidth=t*c,e.beginPath(),e.arc(b.x,b.y,t*(1-d),o+Math.PI/10,o+Math.PI/2,!1),e.stroke(),e.strokeStyle=r.smallCircle,e.lineWidth=t*c,e.beginPath(),e.arc(f.x,f.y,t*d,o-Math.PI/2,o-Math.PI/2-Math.PI/5*2,!0),e.stroke(),e.beginPath(),e.strokeStyle=r.border,e.lineWidth=m,e.fillStyle=r.thick,x(y),u(P),u(v),u(f),u(y),e.stroke(),e.fill(),e.strokeStyle=r.bigCircle,e.lineWidth=t*c,e.beginPath(),e.arc(P.x,P.y,t*(1-d),o+Math.PI/2,o+Math.PI/2+Math.PI/5*2,!1),e.stroke(),e.strokeStyle=r.smallCircle,e.lineWidth=t*c,e.beginPath(),e.arc(f.x,f.y,t*d,o-Math.PI/2,o-Math.PI/10,!1),e.stroke()}(t,i,e,Math.atan2(u.y,u.x),o,g)}else if("deuce"===e.type){const h=e.rhombuses.find((t=>!t.isThin)),a=x(h.points[0],h.points[2]),u=new n.E(e.x-a.x,e.y-a.y);!function(t,e,i,o,h,a){o-=Math.PI/2;const g=(t,e,i,o)=>{const h=(0,s.cG)(new n.E(e,i),o);return new n.E(h.x+t.x,h.y+t.y)},x=t=>{e.lineTo(t.x,t.y)},u=h(i),y=h(g(i,0,2*-l,o)),p=h(g(i,-r,-l,o)),f=h(g(i,r,-l,o));var b;e.beginPath(),e.strokeStyle=a.border,e.lineWidth=m,e.fillStyle=a.thick,b=u,e.moveTo(b.x,b.y),x(f),x(y),x(p),x(u),e.stroke(),e.fill(),e.strokeStyle=a.bigCircle,e.lineWidth=t*c,e.beginPath(),e.arc(y.x,y.y,t*(1-d),o+Math.PI/2-Math.PI/5,o+Math.PI/2+Math.PI/5,!1),e.stroke(),e.strokeStyle=a.smallCircle,e.lineWidth=t*c,e.beginPath(),e.arc(u.x,u.y,t*d,o-Math.PI/2+Math.PI/5,o-Math.PI/2-Math.PI/5,!0),e.stroke()}(t,i,e,Math.atan2(u.y,u.x),o,g)}}function x(t,e,i=.5){const s=e.x-t.x,o=e.y-t.y,h=t.x+s*i,a=t.y+o*i;return new n.E(h,a)}class u{constructor(t,e,i,s,o,h,a,l,r=new n.E(0,0)){this.random=t,this.generator=e,this.colorTheme=i,this.one=s,this.pxWidth=o,this.pxHeight=h,this.smallCanvas=a,this.bigCanvas=l,this.centerUnits=r,this.bigContext=this.bigCanvas.getContext("2d",{willReadFrequently:!0}),this.smallContext=this.smallCanvas.getContext("2d",{willReadFrequently:!0}),this.bigWidthPx=this.pxWidth,this.bigHeightPx=this.pxHeight,l.width=this.pxWidth,l.height=this.pxHeight,this.bigCanvas.style.width=this.bigCanvas.width+"px",this.bigCanvas.style.height=this.bigCanvas.height+"px",a.width=3*this.pxWidth,a.height=3*this.pxHeight,this.smallCanvas.style.width=this.smallCanvas.width+"px",this.smallCanvas.style.height=this.smallCanvas.height+"px",this.smallPositionOnBigPx=new n.E(0,0),this.draw(),this.moveToBig()}convertUnitsToPx(t){const e=this.pxWidth/this.one/2,i=this.pxHeight/this.one/2,o=(0,s.UI)(t.x,this.centerUnits.x-e,this.centerUnits.x+e,0,this.pxWidth)+this.pxWidth,h=(0,s.UI)(t.y,this.centerUnits.y-i,this.centerUnits.y+i,0,this.pxHeight)+this.pxHeight;return new n.E(o,h)}drawToCanvas(t,e,i,n){this.smallContext.fillStyle="white",this.smallContext.fillRect(0,0,3*document.documentElement.clientWidth,3*(document.documentElement.clientHeight-100));const s=this.generator.generate(t,e,i,n);(0,o.kN)(s);for(const t of Object.values(s.vertexes))g(this.one,t,this.smallContext,(t=>this.convertUnitsToPx(t)),this.colorTheme);return s}draw(){const t=this.pxWidth/this.one/2,e=this.pxHeight/this.one/2;this.tiling=this.drawToCanvas(this.centerUnits.x-6*t,this.centerUnits.x+6*t,this.centerUnits.y-6*e,this.centerUnits.y+6*e)}resize(t,e){this.smallPositionOnBigPx.x-=(t-this.pxWidth)/2,this.smallPositionOnBigPx.y-=(e-this.pxHeight)/2,this.pxWidth=t,this.pxHeight=e,this.smallCanvas.width=3*t,this.smallCanvas.style.width=this.smallCanvas.width+"px",this.smallCanvas.height=3*e,this.smallCanvas.style.height=this.smallCanvas.height+"px",this.smallCanvas.style.top=-e+"px",this.smallCanvas.style.left=-t+"px",this.draw(),(async()=>{this.checkBigSize(),this.moveToBig()})()}changeOne(t){this.one=t,this.draw(),(async()=>{this.moveToBig()})()}move(t){const e=t.x/this.one,i=t.y/this.one;this.centerUnits.x+=e,this.centerUnits.y+=i,this.smallPositionOnBigPx.x+=t.x,this.smallPositionOnBigPx.y+=t.y,this.draw(),(async()=>{this.checkBigSize(),this.moveToBig()})()}moveToBig(){const t=this.smallContext.getImageData(this.pxWidth,this.pxHeight,this.pxWidth,this.pxHeight);this.bigContext.putImageData(t,this.smallPositionOnBigPx.x,this.smallPositionOnBigPx.y)}checkBigSize(){const t=0-this.smallPositionOnBigPx.x,e=this.smallPositionOnBigPx.x+this.pxWidth-this.bigWidthPx,i=0-this.smallPositionOnBigPx.y,n=this.smallPositionOnBigPx.y+this.pxHeight-this.bigHeightPx;if(t<=0&&e<=0&&i<=0&&n<=0)return;const s=this.bigContext.getImageData(0,0,this.bigWidthPx,this.bigHeightPx);t>0&&(this.bigCanvas.width+=t,this.bigCanvas.style.width=this.bigCanvas.width+"px",this.bigWidthPx+=t,this.smallPositionOnBigPx.x=0),e>0&&(this.bigCanvas.width+=e,this.bigCanvas.style.width=this.bigCanvas.width+"px",this.bigWidthPx+=e),i>0&&(this.bigCanvas.height+=i,this.bigCanvas.style.height=this.bigCanvas.height+"px",this.bigHeightPx+=i,this.smallPositionOnBigPx.y=0),n>0&&(this.bigCanvas.height+=n,this.bigCanvas.style.height=this.bigCanvas.height+"px",this.bigHeightPx+=n),this.bigContext.putImageData(s,Math.max(t,0),Math.max(i,0))}}},575:(t,e,i)=>{i.d(e,{b:()=>n});const n=[{dark:{thin:"#d9d8ff",thick:"#ffdbdb",smallCircle:"#6d6dff",bigCircle:"#ff7171",border:"rgba(0, 0, 0, 1)"},light:{thin:"#d9d8ff",thick:"#ffdbdb",smallCircle:"#6d6dff",bigCircle:"#ff7171",border:"rgba(0, 0, 0, 1)"}},{dark:{thin:"red",thick:"blue",smallCircle:"black",bigCircle:"black",border:"rgba(0, 0, 0, 0)"},light:{thin:"red",thick:"blue",smallCircle:"white",bigCircle:"white",border:"rgba(0, 0, 0, 0)"}}]},497:(t,e,i)=>{i.d(e,{TJ:()=>a,fE:()=>o,hq:()=>h,mj:()=>l});const n={text:"#808080 penrose1",fileName:"penrose.png",bottom:15,right:10,font:"bold 30px Arial",strokeWidth:4},s=!(!window.matchMedia||!window.matchMedia("(prefers-color-scheme: dark)").matches);function o(t,e){c(e.getImageData(0,0,t.width,t.height))}function h(t,e){const i=t.width/3,n=t.height/3;c(e.getImageData(i,n,i,n))}async function a(t,e){const i=e.getImageData(0,0,t.width,t.height),n=await m(i);await navigator.clipboard.write([new ClipboardItem({"image/png":n})])}async function l(t,e){const i=t.width/3,n=t.height/3,s=e.getImageData(i,n,i,n),o=await m(s);await navigator.clipboard.write([new ClipboardItem({"image/png":o})])}function r(t,e,i){t.font=n.font,t.textAlign="end",t.fillStyle=s?"black":"white",t.strokeStyle=s?"white":"black",t.lineWidth=n.strokeWidth,t.strokeText(n.text,e-n.right,i-n.bottom),t.fillText(n.text,e-n.right,i-n.bottom)}function c(t){const e=document.createElement("canvas");e.style.display="none",e.style.width=t.width+"px",e.style.height=t.height+"px",e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.putImageData(t,0,0),r(i,t.width,t.height);const s=e.toDataURL("image/png").replace("image/png","image/octet-stream"),o=document.createElement("a");o.style.display="none",o.href=s,o.download=n.fileName,o.click(),o.remove(),e.remove()}async function m(t){const e=t.width,i=t.height;let n=document.createElement("canvas");n.width=e,n.height=i;const s=n.getContext("2d");return s.putImageData(t,0,0),r(s,t.width,t.height),new Promise((t=>{n.toBlob(t)}))}},915:(t,e,i)=>{i.d(e,{Mx:()=>s,UI:()=>o,cG:()=>h});var n=i(25);function s(t,e,i){let n=0;for(let s=t;s<=e;s++)n+=i(s);return n}function o(t,e,i,n,s){let o=t-e;return o*=(s-n)/(i-e),o+=n,o}function h(t,e){return function(t,e,i){const s=t.x*i-t.y*e,o=t.x*e+t.y*i;return new n.E(s,o)}(t,Math.sin(e),Math.cos(e))}},299:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var n=i(834),s=i(875),o=i(25),h=i(211),a=i(497),l=i(575);const r=document.getElementById("big"),c=r.getContext("2d",{willReadFrequently:!0}),m=document.getElementById("small"),d=m.getContext("2d",{willReadFrequently:!0}),g={left:-document.documentElement.clientWidth,top:100-document.documentElement.clientHeight,x:0,y:0},x=!(!window.matchMedia||!window.matchMedia("(prefers-color-scheme: dark)").matches),u=(await(0,h.Th)(),new h.kk(Date.now())),y=(0,h.$z)(u),p=u.nextArrayValue(l.b)[x?"dark":"light"],f=new s.zQ(y),b=new n.S(u,f,p,50,document.documentElement.clientWidth,document.documentElement.clientHeight-100,m,r);function w(){let t=0,e=0;m.ontouchstart=i=>{1===i.touches.length&&(t=i.touches[0].clientX,e=i.touches[0].clientY)},m.ontouchmove=i=>{if(i.preventDefault(),i.stopImmediatePropagation(),i.stopPropagation(),1===i.touches.length){const n=i.touches[0].clientX-t,s=i.touches[0].clientY-e;t=i.touches[0].clientX,e=i.touches[0].clientY,g.left+=n,g.top+=s,g.x-=n,g.y-=s,m.style.top=g.top+"px",m.style.left=g.left+"px"}},m.ontouchend=t=>{t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),b.move(new o.E(g.x,g.y)),g.x=0,g.y=0,g.left=-document.documentElement.clientWidth,g.top=100-document.documentElement.clientHeight,m.style.top=g.top+"px",m.style.left=g.left+"px"}}window.onresize=t=>{b.resize(document.documentElement.clientWidth,document.documentElement.clientHeight-100)},w(),m.onmousemove=async t=>{if(!t.buttons)return;t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation();const e=-t.movementX,i=-t.movementY;g.left-=e,g.top-=i,g.x+=e,g.y+=i,m.style.top=g.top+"px",m.style.left=g.left+"px"},m.onmouseup=async t=>{b.move(new o.E(g.x,g.y)),g.x=0,g.y=0,g.left=-document.documentElement.clientWidth,g.top=100-document.documentElement.clientHeight,m.style.top=g.top+"px",m.style.left=g.left+"px"},document.getElementById("copyBig").onclick=async t=>{const e=document.getElementById("copyBig");e.innerText="copying";try{await(0,a.TJ)(r,c),e.innerText="copied"}catch(t){console.error(t),e.innerText="failed"}setTimeout((()=>{e.innerText="copy big"}),2e3)},document.getElementById("copySmall").onclick=async t=>{const e=document.getElementById("copySmall");e.innerText="copying";try{await(0,a.mj)(m,d),e.innerText="copied"}catch(t){console.error(t),e.innerText="failed"}setTimeout((()=>{e.innerText="copy small"}),2e3)},document.getElementById("downloadBig").onclick=t=>{(0,a.fE)(r,c)},document.getElementById("downloadSmall").onclick=t=>{(0,a.hq)(m,d)},e()}catch(P){e(P)}}),1)},875:(t,e,i)=>{i.d(e,{kN:()=>c,zQ:()=>r});var n=i(25),s=i(915);class o{constructor(t,e){this.vertexes=t,this.rhombuses=e}}class h extends n.E{constructor(t,e=[]){if(5!=t.length)throw new Error("There should be 5 line numbers.");super((0,s.Mx)(0,4,(e=>t[e]*-Math.sin(2*Math.PI*e/5))),(0,s.Mx)(0,4,(e=>t[e]*Math.cos(2*Math.PI*e/5)))),this.lineNumbers=t,this.rhombuses=e,this.hash=t.join("_")}}class a extends n.E{constructor(t,e,i,n,s,o){super(t,e),this.line1Family=i,this.line2Family=n,this.line1Number=s,this.line2Number=o,this.type=(n-i)%5,this.hash=`${i}_${s}_${n}_${o}`}}class l{constructor(t,e){if(this.points=t,this.intersectionPoint=e,4!=t.length)throw new Error("There should be penrose points.");this.isThin=2===e.type||3===e.type}}class r{constructor(t){this.shifts=t}generate(t,e,i,n){window.performance.now();const s=this.getAllIntersectionPoints(t-5,e+5,i-5,n+5),h=(window.performance.now(),{}),a=s.map((t=>this.generateRhombusFromPoint(t,h)));return window.performance.now(),new o(h,a)}getIntersectionPoint(t,e,i,s){const o=Math.tan(2*t*Math.PI/5),h=Math.tan(2*i*Math.PI/5),a=2.5*(this.shifts[t]+e)/Math.cos(2*t*Math.PI/5),l=(2.5*(this.shifts[i]+s)/Math.cos(2*i*Math.PI/5)-a)/(o-h),r=o*l+a;return new n.E(l,r)}findSectionOnLineFamily(t,e,i){const n=(i-Math.tan(2*t*Math.PI/5)*e)*Math.cos(2*t*Math.PI/5)/2.5-this.shifts[t];return Math.floor(n)}getIntersectionPoints(t,e,i,n,s,o){const h=this.findSectionOnLineFamily(s,(t+e)/2,(i+n)/2),l=this.findSectionOnLineFamily(o,(t+e)/2,(i+n)/2),r=[],c=(h,l)=>{if(r.find((t=>t.line1Number===h&&t.line2Number===l)))return;const m=this.getIntersectionPoint(s,h,o,l);m.x<t||m.x>e||m.y<i||m.y>n||(r.push(new a(m.x,m.y,s,o,h,l)),c(h-1,l),c(h+1,l),c(h,l-1),c(h,l+1))};for(let t=-2;t<=2;t++)for(let e=-2;e<=2;e++)c(h+t,l+e);return r}getAllIntersectionPoints(t,e,i,n){const s=[];for(let o=0;o<5;o++)for(let h=o+1;h<5;h++)s.push(...this.getIntersectionPoints(t,e,i,n,o,h));return s}generateRhombusFromPoint(t,e){const i=[0,1,2,3,4].map((e=>this.findSectionOnLineFamily(e,t.x,t.y))),n=[...i],s=[...i],o=[...i],a=[...i];n[t.line1Family]=t.line1Number-1,s[t.line1Family]=t.line1Number-1,o[t.line1Family]=t.line1Number,a[t.line1Family]=t.line1Number,n[t.line2Family]=t.line2Number-1,s[t.line2Family]=t.line2Number,o[t.line2Family]=t.line2Number,a[t.line2Family]=t.line2Number-1;const r=[new h(n),new h(s),new h(o),new h(a)],c=new l(r,t);for(const t of r){let i=e[t.hash];i||(e[t.hash]=t,i=t),i.rhombuses.push(c)}return c}}function c(t){const e=(t,e)=>5===e&&0===t?"star":2===e&&1===t?"kite":1===e&&2===t?"deuce":3===e&&1===t?"jack":3===e&&2===t?"ace":4===e&&2===t?"king":3===e&&4===t?"queen":"uncomplete";for(const i of Object.values(t.vertexes)){const t=i.rhombuses.filter((t=>t.isThin)).length,n=i.rhombuses.length-t;i.type=e(t,n)}}},25:(t,e,i)=>{i.d(e,{E:()=>n});class n{constructor(t,e){this.x=t,this.y=e}}},211:(t,e,i)=>{i.d(e,{$z:()=>o,Th:()=>s,kk:()=>n});class n{constructor(t=420){this.seed=t}random(){const t=1e4*Math.sin(this.seed++);return t-Math.floor(t)}next(){return this.random()}nextInRange(t,e){return t===e?t:t>e?this.nextInRange(e,t):t+this.random()*(e-t)}nextIntInRange(t,e){return t===e?t:t>e?this.nextIntInRange(e,t):Math.floor(this.nextInRange(t,e))}nextArrayValue(t){return t[this.nextIntInRange(0,t.length)]}}async function s(){const t="rgb128_penrose1_seed",e=+localStorage[t];if(e)return e;const i=await(async()=>{try{const t=await fetch("https://worldtimeapi.org/api/ip");return+(await t.json()).unixtime}catch(t){return console.error(t),null}})()||Math.floor(Date.now()/1e3),n=Math.floor(i/86400);return localStorage[t]=n,n}function o(t,e=5){const i=[0];let n=0;for(let s=0;s<e-2;s++){const e=t.nextInRange(-1,1);n+=e,i.push(e)}return i.push(-n),i}}},o={};function h(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={exports:{}};return s[t](i,i.exports,h),i.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},h.a=(s,o,h)=>{var a;h&&((a=[]).d=-1);var l,r,c,m=new Set,d=s.exports,g=new Promise(((t,e)=>{c=e,r=t}));g[e]=d,g[t]=t=>(a&&t(a),m.forEach(t),g.catch((t=>{}))),s.exports=g,o((s=>{var o;l=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[t])return s;if(s.then){var o=[];o.d=0,s.then((t=>{h[e]=t,n(o)}),(t=>{h[i]=t,n(o)}));var h={};return h[t]=t=>t(o),h}}var a={};return a[t]=t=>{},a[e]=s,a})))(s);var h=()=>l.map((t=>{if(t[i])throw t[i];return t[e]})),r=new Promise((e=>{(o=()=>e(h)).r=0;var i=t=>t!==a&&!m.has(t)&&(m.add(t),t&&!t.d&&(o.r++,t.push(o)));l.map((e=>e[t](i)))}));return o.r?r:h()}),(t=>(t?c(g[i]=t):r(d),n(a)))),a&&a.d<0&&(a.d=0)},h.d=(t,e)=>{for(var i in e)h.o(e,i)&&!h.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},h.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),h(299),h(80)})();